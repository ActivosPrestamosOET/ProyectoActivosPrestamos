@model PagedList.IPagedList<Activos_PrestamosOET.Models.ACTIVO>
@using PagedList.Mvc;

@{
    ViewBag.Title = "Index";
}
<div class="row">
    <div class="col-xs-12">
        <h2>Activos disponibles en el sistema</h2>
        <hr />
    </div>
</div>
<div class="row">
    <div class="col-xs-12 col-sm-8 col-sm-offset-2">
        @using (Html.BeginForm("Index", "ACTIVOS", FormMethod.Get))
        {
            <div class="input-group">
                @Html.Editor("busqueda", ViewBag.FiltroActual as string, new { htmlAttributes = new { @class = "form-control", @placeholder = "Ingrese su búsqueda de activos" } })
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-default" title="Buscar"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                </span>
            </div>
        }
    </div>
</div>
<div class="row">
    <div class="col-xs-12 col-sm-8 col-sm-offset-2">
        <div class="pull-right">
            <p><small><a role="button" data-toggle="collapse" href="#seccion_busqueda" aria-expanded="false" aria-controls="seccion_busqueda" title="Opciones de busqueda avanzada">Búsqueda avanzada <span class="caret"></span></a></small></p>
        </div>
        <br />
    </div>
</div>
<div class="row collapse" id="seccion_busqueda">
    <div class="col-xs-12 col-sm-8 col-sm-offset-2">
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="row">
                    <div class="col-xs-12">
                        <h5>Opciones de búsqueda avanzada</h5>
                        <hr />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        @using (Html.BeginForm("Index", "ACTIVOS", FormMethod.Get))
                        {
                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="TIPO_ACTIVOID">Tipo de activo</label>
                                        @Html.DropDownList("TIPO_ACTIVOID", null, "-- Tipos de activos --", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="V_ESTACIONID">Estación a la que pertenece</label>
                                        @Html.DropDownList("V_ESTACIONID", null, "-- Estaciones --", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="V_ANFITRIONAID">Compañía</label>
                                        @Html.DropDownList("V_ANFITRIONAID", null, "-- Compañías --", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="usuario">Persona que lo ingresó</label>
                                        <input type="text" class="form-control" id="usuario" name="usuario" placeholder="Ingrese el nombre" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="ESTADO_ACTIVOID">Estado del activo</label>
                                        @Html.DropDownList("ESTADO_ACTIVOID", null, "-- Estados de los activos --", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="TIPO_TRANSACCIONID">Adquirido por medio de</label>
                                        @Html.DropDownList("TIPO_TRANSACCIONID", null, "-- Tipos de adquisiciones --", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="fecha_antes">Comprado antes de</label>
                                        <input type="date" class="form-control" id="fecha_antes" name="fecha_antes" />
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="fecha_despues">Comprado después de</label>
                                        <input type="date" class="form-control" id="fecha_despues" name="fecha_despues" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="V_PROVEEDORIDPROVEEDOR">Proveedor</label>
                                        @Html.DropDownList("V_PROVEEDORIDPROVEEDOR", null, "-- Proveedores --", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group form-group-sm">
                                        <label class="control-label" for="fabricante">Fabricante</label>
                                        <input type="text" class="form-control" id="fabricante" name="fabricante" placeholder="Nombre del fabricante" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <hr />
                                    <div class="pull-right">
                                        @Html.ActionLink("Limpiar búsqueda", "Index", "Activos", new { @class = "btn btn-sm btn-primary" })
                                        <button type="submit" class="btn btn-sm btn-default" title="Busqueda avanzada">Buscar &nbsp; <span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br />
</div>
<div class="row">
    <div class="col-xs-12 col-sm-10 col-sm-offset-1">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>
                            @Html.ActionLink("Número de placa", "Index", new { orden = ViewBag.NumPlacaParam })
                        </th>
                        <th>
                            @Html.ActionLink("Estado", "Index", new { orden = ViewBag.EstadoParam })
                        </th>
                        <th>
                            @Html.ActionLink("Descripción", "Index", new { orden = ViewBag.Descripcion})
                        </th>
                        <th colspan="4" class="text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
            {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.PLACA)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ESTADOS_ACTIVOS.NOMBRE)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DESCRIPCION)
                            </td>
                            <td class="text-center">
                                <a href="@Url.Action("Asignar", new {id= item.ID})">
                                    <span class="glyphicon glyphicon-share-alt" style="color:#7bc143" aria-hidden="true" title="Cambiar estado"></span>
                                </a>
                            </td>

                            <td class="text-center">
                                <a href="@Url.Action("Edit", new {id= item.ID})">
                                    <span class="glyphicon glyphicon-edit text-warning" aria-hidden="true" title="Editar"></span>
                                </a>
                            </td>
                            <td class="text-center">
                                <a href="@Url.Action("Details", new { id = item.ID })">
                                    <span class="glyphicon glyphicon-eye-open text-info" aria-hidden="true" title="Detalles"></span>
                                </a>
                            </td>
                            <td class="text-center">
                                <a href="@Url.Action("Delete", new { id = item.ID })">
                                    <span class="glyphicon glyphicon-erase text-danger" aria-hidden="true" title="Eliminar"></span>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-12 col-sm-10 col-sm-offset-1">
        <small><span class="text-muted">Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount</span></small>
        @Html.PagedListPager(Model, pagina => Url.Action("Index", new { pagina, orden = ViewBag.OrdenActual, filtro = ViewBag.FiltroActual }))

        <div class="pull-right">
            @Html.ActionLink("Crear un nuevo activo", "Create", new object { }, new { @class = "btn btn-default" })
        </div>

    </div>
</div>